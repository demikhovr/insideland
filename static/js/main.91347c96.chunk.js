(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,a){},151:function(e,t,a){},164:function(e,t,a){},17:function(e,t,a){e.exports={Test:"TestItem_Test__3Ab77",TestWrapper:"TestItem_TestWrapper__3tA8_",TestTopIcons:"TestItem_TestTopIcons__3jI9O","fa-heart":"TestItem_fa-heart__3JYhv",TestProfile:"TestItem_TestProfile__HNfPO",TestProfileCheck:"TestItem_TestProfileCheck__2TPZ3",TestThumbail:"TestItem_TestThumbail__2mbWd",TestProfileName:"TestItem_TestProfileName__2Midb",TestProfileTitle:"TestItem_TestProfileTitle__1PoT7",TestProfileDescription:"TestItem_TestProfileDescription__-HA6e",TestProfileBtn:"TestItem_TestProfileBtn__36eJX",TestSocialIcon:"TestItem_TestSocialIcon__3-5KV",TestPassedInfo:"TestItem_TestPassedInfo__15mI8",TestPassedInfoAmount:"TestItem_TestPassedInfoAmount__1vlL8",TestPassedRange:"TestItem_TestPassedRange__3qViC",TestPassedRangeCircleOne:"TestItem_TestPassedRangeCircleOne__EPjJL",TestPassedRangeCircleTwo:"TestItem_TestPassedRangeCircleTwo__20t7R"}},175:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(35),i=a.n(s),o=a(23),c=a(69),l=a(22),u=(a(90),a(92),a(178)),d=a(4),m=a.n(d),f=a(6),p=a(9),v=a(10),h=a(13),_=a(11),E=a(12),b=a(3),T=a(177),g=a(40),N=a.n(g),I=a(47),O=a.n(I),C=a(30),w=a.n(C),y=[{to:"/",label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",exact:!0},{to:"/catalog/",label:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433",exact:!1},{to:"/constructor/",label:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",exact:!1}],k=function(e){var t=e.user;return r.a.createElement("ul",{className:w.a.MainNav},t&&y.map(function(e,t){var a=t+e;return r.a.createElement("li",{key:a,className:w.a.MainNavItem},r.a.createElement(T.a,{to:e.to,exact:e.exact,className:w.a.MainNavItemLink,activeClassName:w.a.MainNavItemLinkActive},e.label))}))};k.defaultProps={user:null};var j=k,S=a(31),A=a.n(S),R=function(e){var t=e.user,a=e.onLogIn,n=e.onLogOut;return r.a.createElement("div",{className:A.a.UserNav},t?r.a.createElement("div",{className:A.a.UserNavPicWrapper,title:t.displayName},r.a.createElement("img",{className:A.a.UserNavPic,src:t.photoURL,alt:t.displayName})):null,r.a.createElement("button",{className:A.a.UserNavBtn,type:"button",onClick:t?n:a},t?"\u0412\u044b\u0439\u0442\u0438":"\u0412\u043e\u0439\u0442\u0438"))};R.defaultProps={user:null};var P=R,x=function(e){var t=e.user,a=e.onLogIn,n=e.onLogOut;return r.a.createElement("nav",{className:O.a.Navigation},r.a.createElement("div",{className:O.a.NavigationWrapper},r.a.createElement(j,{user:t}),r.a.createElement(P,{user:t,onLogIn:a,onLogOut:n})))};x.defaultProps={user:null};var L=x,M=function(e){var t=e.user,a=e.onLogIn,n=e.onLogOut;return r.a.createElement("header",{className:N.a.Header},r.a.createElement("div",{className:N.a.HeaderInner},r.a.createElement(T.a,{className:N.a.HeaderLogo,to:"/"},"\u0418\u043d\u0441\u0430\u0439\u0434\u0438\u044f"),r.a.createElement(L,{user:t,onLogIn:a,onLogOut:n})))};M.defaultProps={user:null};var F=M,z=a(180),q=a(99),B=a(179),D=a(181),Q=a(48),W=a.n(Q),U=function(e){var t=e.children;return r.a.createElement("div",{className:W.a.Layout},r.a.createElement("main",{className:W.a.LayoutMain},t))};U.defaultProps={children:null};var H=U,V=a(71),J=a.n(V),Z=function(){return r.a.createElement("div",{className:J.a.Main},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")},K=a(41),X=a.n(K),Y=a(32),G=a.n(Y),$=function(e){var t=e.links;return r.a.createElement("nav",{className:G.a.Navigation},t.map(function(e,t){var a=t+e;return r.a.createElement("li",{key:a,className:G.a.NavigationItem},r.a.createElement(T.a,{to:e.to,exact:e.exact,className:G.a.NavigationItemLink,activeClassName:G.a.NavigationItemLinkActive},e.label))}))},ee=a(28),te=a(49),ae=a.n(te),ne=a(101),re=a(17),se=a.n(re),ie=(a(116),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(_.a)(t).call(this,e))).ironImageRef=r.a.createRef(),a.preloadImageRef=r.a.createRef(),a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=new window.Image;a.src=t.srcLoaded,a.addEventListener("load",function(){e.ironImageRef.current&&(e.ironImageRef.current.setAttribute("style","background-image: url('".concat(t.srcLoaded,"')")),e.ironImageRef.current.classList.add("iron-image-fade-in"),e.preloadImageRef.current.style.background="none")})}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props,a=new window.Image;a.src=t.srcLoaded,a.addEventListener("load",function(){e.ironImageRef.current&&e.ironImageRef.current.setAttribute("style","background-image: url('".concat(t.srcLoaded,"')"))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"iron-image-container"},r.a.createElement("div",{className:"iron-image-loaded",ref:this.ironImageRef}),r.a.createElement("div",{className:"iron-image-preload",style:{backgroundImage:"url('img/default.png')"},ref:this.preloadImageRef}))}}]),t}(n.Component)),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter(function(t){return e[t].isPassed}).length},ce=function(e){var t=oe(e),a=Object.keys(e).length;return 0===t&&0===a?0:t/a*100},le=function(e){var t=e.id,a=e.image,n=e.name,s=e.title,i=e.description,o=e.isEditable,c=e.onRemoveBtnClick,l=e.onEditBtnClick,u=e.isFavorite,d=e.onFavoriteBtnClick,m=e.location,f=e.quizes;return r.a.createElement("div",{className:se.a.Test},r.a.createElement("div",{className:se.a.TestWrapper},r.a.createElement("div",{className:se.a.TestTopIcons},o&&r.a.createElement("button",{onClick:function(){return c(t)},type:"button"},r.a.createElement("i",{className:"far fa-times-circle"})),r.a.createElement("button",{style:{margin:"0 auto"},onClick:function(){return d(t)},type:"button"},r.a.createElement("i",{className:u?"fa fa-heart":"far fa-heart"})),o&&r.a.createElement("button",{onClick:function(){return l(t)},type:"button"},r.a.createElement("i",{className:"far fa-edit"}))),r.a.createElement("div",{className:se.a.TestProfile},r.a.createElement(ie,{srcPreload:a,srcLoaded:a||"img/default.png"}),100===ce(f)?r.a.createElement("div",{className:se.a.TestProfileCheck},r.a.createElement("i",{className:"fas fa-check"})):null,r.a.createElement("h3",{className:se.a.TestProfileName},n),r.a.createElement("p",{className:se.a.TestProfileTitle},s),r.a.createElement("p",{className:se.a.TestProfileDescription},i),r.a.createElement("p",{className:se.a.TestPassedInfo},r.a.createElement("svg",{className:se.a.TestPassedRange,viewBox:"0 0 32 32"},r.a.createElement("circle",{className:se.a.TestPassedRangeCircleOne,r:"16",cx:"16",cy:"16"}),r.a.createElement("circle",{style:{strokeDasharray:"".concat(ce(f)," 100")},className:se.a.TestPassedRangeCircleTwo,r:"16",cx:"16",cy:"16"})),r.a.createElement("span",{className:se.a.TestPassedInfoAmount},"".concat(oe(f),"/").concat(Object.keys(f).length))),r.a.createElement(ne.a,{to:{pathname:"".concat(t,"/"),state:{from:m}},className:se.a.TestProfileBtn},"\u041a \u0442\u0435\u0441\u0442\u0430\u043c"))))};le.defaultProps={image:"",title:"",isEditable:!1},le.defaultProps={quizes:[],onRemoveBtnClick:function(){},onFavoriteBtnClick:function(){},onEditBtnClick:function(){}};var ue=le,de=a(50),me=a.n(de),fe=function(){return r.a.createElement("div",{className:me.a.center},r.a.createElement("div",{className:me.a.Loader},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},pe=a(5),ve=a(15),he=a.n(ve);he.a.initializeApp({apiKey:"AIzaSyBmRvFOyC535DEUyRYfi85mBYoJIquAoVg",authDomain:"insideland-d53aa.firebaseapp.com",databaseURL:"https://insideland-d53aa.firebaseio.com",projectId:"insideland-d53aa",storageBucket:"gs://insideland-d53aa.appspot.com",messagingSenderId:"413218801184"});var _e=new he.a.auth.GoogleAuthProvider,Ee=he.a.auth(),be=he.a,Te=a(72),ge=a.n(Te).a.create({baseURL:"https://insideland-d53aa.firebaseio.com/"}),Ne=function(e){return{type:"FETCH_TESTS_SUCCESS",tests:e}},Ie=function(){return function(){var e=Object(f.a)(m.a.mark(function e(t){var a,n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_TESTS_START"}),e.prev=1,e.next=4,ge.get("tests.json");case 4:a=e.sent,(n=a.data)||(n={}),r=Object.keys(n).reverse().map(function(e){var t=n[e];return t.id=e,t.info.id=e,t}),t(Ne(r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t({type:"FETCH_TESTS_ERROR",error:e.t0});case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()},Oe=function(e){return{type:"ADD_TEST_TO_FAVORITES_SUCCESS",tests:e}},Ce=function(e){return{type:"ADD_NEW_TEST_SUCCESS",test:e}},we=function(e){return{type:"REMOVE_TEST_SUCCESS",id:e}},ye=function(e){return{type:"EDIT_TEST_SUCCESS",tests:e}},ke=(a(151),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTests()}},{key:"render",value:function(){var e=this.props;return r.a.createElement("div",{className:ae.a.Tests},e.isLoading?r.a.createElement(fe,null):function(e){var t=e.tests,a=e.location;return t.length?r.a.createElement(ee.TransitionGroup,{component:null},t.map(function(e){var t=e.info,n=e.quizes;return r.a.createElement(ee.CSSTransition,{key:t.id,timeout:500,classNames:"move"},r.a.createElement(ue,Object.assign({},t,{quizes:n,location:a})))})):r.a.createElement("div",{className:ae.a.EmptyList},"\u0422\u0435\u0441\u0442\u044b \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u044b.")}(e))}}]),t}(n.Component)),je=Object(l.b)(function(e){return{tests:e.catalog.tests,isLoading:e.catalog.isLoading}},function(e){return{fetchTests:function(){return e(Ie())}}})(ke),Se=a(73),Ae=a.n(Se),Re=a(33),Pe=a.n(Re),xe={numeric:"\u0427\u0438\u0441\u043b\u043e\u0432\u044b\u0435",verbal:"\u0412\u0435\u0440\u0431\u0430\u043b\u044c\u043d\u044b\u0435",logical:"\u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435"},Le={numeric:"#edebff",verbal:"#e4e4fe",logical:"#e4e4fe"},Me=function(e){var t=e.children,a=e.to,n=e.location,s=e.id,i=a?r.a.createElement(T.a,{className:Pe.a.content,to:{pathname:a,state:{from:n,parentId:s}}},t):t;return r.a.createElement("td",null,i)};Me.defaultProps={to:null,children:[]};var Fe=function(e){var t,a=e.tests,n=e.location,s=e.editor,i=e.id,o=new Map;t=a?Object.keys(a).map(function(e){var t=a[e];return t.id=e,t}).sort(function(e,t){var a=xe[e.type],n=xe[t.type];return a.localeCompare(n)}):[];var c=!!Object.keys(s).length;return r.a.createElement("table",{className:Pe.a.TestsTable,cellSpacing:"0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u0422\u0438\u043f"),r.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432"),r.a.createElement("th",null,"\u0412\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f"),r.a.createElement("th",null,"\u041f\u0440\u043e\u0439\u0434\u0435\u043d"))),r.a.createElement("tbody",null,c?r.a.createElement("tr",null,r.a.createElement("td",{className:Pe.a.NewItemBtnWrapper,colSpan:"5"},r.a.createElement("button",{className:Pe.a.NewItemBtn,type:"button",onClick:s.onAdd}))):null,t.map(function(e){var t="";return o.get(xe[e.type])||(t=xe[e.type],o.set(t,!0)),r.a.createElement("tr",{style:{backgroundColor:t&&Le[e.type]},key:e.id},r.a.createElement(Me,{to:"".concat(e.id),location:n,id:i},"".concat(t)),r.a.createElement(Me,{to:"".concat(e.id),location:n,id:i},"".concat(e.name)),r.a.createElement(Me,{to:"".concat(e.id),location:n,id:i},"".concat(e.questionCount)),r.a.createElement(Me,{to:"".concat(e.id),location:n,id:i},"".concat(e.time||"")),r.a.createElement(Me,null,null!==e.isPassed&&void 0!==e.isPassed?r.a.createElement("img",{width:"30",height:"30",src:e.isPassed?"img/icon-tick.svg":"img/icon-error.svg",alt:e.name}):null,s.isEditable?r.a.createElement("button",{className:"btn",style:{display:"block",width:60,height:20,margin:"0 auto",padding:5,textAlign:"center",fontSize:10,lineHeight:"10px"},type:"button",onClick:function(){return s.onRemove(e.id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"):null))})))};Fe.defaultProps={tests:{},editor:null};var ze=Fe,qe=a(18),Be=a.n(qe),De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter(function(t){return e[t].isPassed}).length},Qe=function(e){var t=De(e),a=Object.keys(e).length;return 0===t&&0===a?0:t/a*100},We=function(e){var t=e.image,a=e.name,n=e.title,s=e.description,i=e.isFavorite,o=e.quizes;return r.a.createElement("div",{className:Be.a.Test},r.a.createElement("div",{className:Be.a.TestWrapper},r.a.createElement("div",{className:Be.a.TestTopIcons},r.a.createElement("i",{style:{margin:"0 auto"},className:i?"fa fa-heart":"far fa-heart"})),r.a.createElement("div",{className:Be.a.TestProfile},r.a.createElement(ie,{srcPreload:t,srcLoaded:t||"img/default.png"}),100===Qe(o)?r.a.createElement("div",{className:Be.a.TestProfileCheck},r.a.createElement("i",{className:"fas fa-check"})):null,r.a.createElement("h3",{className:Be.a.TestProfileName},a),r.a.createElement("p",{className:Be.a.TestProfileTitle},n),r.a.createElement("p",{className:Be.a.TestProfileDescription},s),r.a.createElement("p",{className:Be.a.TestPassedInfo},r.a.createElement("svg",{className:Be.a.TestPassedRange,viewBox:"0 0 32 32"},r.a.createElement("circle",{className:Be.a.TestPassedRangeCircleOne,r:"16",cx:"16",cy:"16"}),r.a.createElement("circle",{style:{strokeDasharray:"".concat(Qe(o)," 100")},className:Be.a.TestPassedRangeCircleTwo,r:"16",cx:"16",cy:"16"})),r.a.createElement("span",{className:Be.a.TestPassedInfoAmount},"".concat(De(o),"/").concat(Object.keys(o).length))))))};We.defaultProps={image:"",title:"",quizes:[]};var Ue=We,He=function(e){var t=e.data,a=e.location,n=e.editor,s=e.id;return r.a.createElement("div",{className:Ae.a.TestInfo},r.a.createElement(ze,{tests:t.quizes,location:a,editor:n,id:s}),r.a.createElement(Ue,Object.assign({},t.info,{quizes:t.quizes,location:a})))};He.defaultProps={editor:{}};var Ve=He,Je=[{id:1,type:"numeric",name:"\u0422\u0435\u0441\u0442 1",questionCount:"15",time:"22:00",isFinished:null},{id:2,type:"numeric",name:"\u0422\u0435\u0441\u0442 1",questionCount:"15",time:"22:00",isFinished:null},{id:3,type:"numeric",name:"\u0422\u0435\u0441\u0442 1",questionCount:"15",time:"22:00",isFinished:null},{id:4,type:"verbal",name:"\u0422\u0435\u0441\u0442 2",questionCount:"5",time:"15:00",isFinished:null},{id:5,type:"verbal",name:"\u0422\u0435\u0441\u0442 2",questionCount:"5",time:"15:00",isFinished:null},{id:6,type:"logical",name:"\u0422\u0435\u0441\u0442 1",questionCount:"24",time:"30:00",isFinished:null},{id:7,type:"logical",name:"\u0422\u0435\u0441\u0442 1",questionCount:"24",time:"30:00",isFinished:null},{id:8,type:"logical",name:"\u0422\u0435\u0441\u0442 1",questionCount:"24",time:"30:00",isFinished:null}],Ze=function(e){return function(t){function a(e){var t;return Object(p.a)(this,a),(t=Object(h.a)(this,Object(_.a)(a).call(this,e))).state={test:{},isLoading:!0},t}return Object(E.a)(a,t),Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(m.a.mark(function e(){var t,a,n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.match.params.id,this.itemRef=he.a.database().ref("tests/".concat(a)),e.next=5,this.itemRef.once("value");case 5:n=e.sent,r=n.val(),console.log(Je),this.setState({test:r,isLoading:!1});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.itemRef.off()}},{key:"render",value:function(){var t=this.state,a=this.props,n=a.match.params.id;return t.isLoading?r.a.createElement(fe,null):r.a.createElement(e,{data:t.test,location:a.location,id:n})}}]),a}(n.Component)},Ke=a(21),Xe=a(51),Ye=a.n(Xe),Ge=a(52),$e=a.n(Ge),et=a(74),tt=a.n(et),at=a(53),nt=a.n(at),rt=function(e){var t=e.answer,a=e.onAnswerClick,n=e.state,s=[nt.a.AnswerItem];return n&&s.push(nt.a[n]),r.a.createElement("li",{className:s.join(" "),onClick:function(){return a(t.id)}},t.text)};rt.defaultProps={state:null};var st=rt,it=function(e){var t=e.answers,a=e.onAnswerClick,n=e.state;return r.a.createElement("ul",{className:tt.a.AnswersList},t.map(function(e,t){var s=e+t;return r.a.createElement(st,{key:s,answer:e,onAnswerClick:a,state:n?n[e.id]:null})}))};it.defaultProps={state:null};var ot=it,ct=function(e){var t=e.answers,a=e.question,n=e.onAnswerClick,s=e.answerNumber,i=e.quizLength,o=e.state;return r.a.createElement("div",{className:$e.a.ActiveQuiz},r.a.createElement("p",{className:$e.a.Question},r.a.createElement("span",null,r.a.createElement("strong",null,s,"."),"\xa0",a),r.a.createElement("small",null,s,"\xa0\u0438\u0437\xa0",i)),r.a.createElement(ot,{state:o,answers:t,onAnswerClick:n}))};ct.defaultProps={state:null};var lt=ct,ut=a(54),dt=a.n(ut),mt=Object(D.a)(function(e){var t=e.results,a=e.quiz,n=e.onRetry,s=e.location,i=Object.keys(t).reduce(function(e,a){var n=e;return"success"===t[a]&&(n+=1),n},0);return r.a.createElement("div",{className:dt.a.FinishedQuiz},r.a.createElement("ul",null,a.map(function(e,a){var n=e+a,s=["fa","error"===t[e.id]?"fa-times":"fa-check",dt.a[t[e.id]]];return r.a.createElement("li",{key:n},r.a.createElement("strong",null,a+1),". \xa0",e.question,r.a.createElement("i",{className:s.join(" ")}))})),r.a.createElement("p",null,"\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\xa0",i,"\xa0\u0438\u0437\xa0",a.length),r.a.createElement("div",null,r.a.createElement("button",{className:"btn",onClick:n,type:"button"},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c"),r.a.createElement(ne.a,{to:s.state.from},r.a.createElement("span",{className:"btn"},"\u041d\u0430\u0437\u0430\u0434 \u043a \u0442\u0435\u0441\u0442\u0430\u043c"))))}),ft=a(76),pt=a.n(ft),vt=function(e){var t=e.time;return r.a.createElement("div",{className:pt.a.Timer},t)},ht=function(e){return"".concat(Math.floor(e/60),":").concat("0".concat(e%60).slice(-2))},_t=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(_.a)(t).call(this,e))).state={time:0,results:{},isFinished:!1,activeQuestion:0,answerState:null,isLoading:!0},a.onAnswerClickHandler=a.onAnswerClickHandler.bind(Object(b.a)(Object(b.a)(a))),a.onRetryHandler=a.onRetryHandler.bind(Object(b.a)(Object(b.a)(a))),a.areAllAnswersRight=a.areAllAnswersRight.bind(Object(b.a)(Object(b.a)(a))),a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(m.a.mark(function e(){var t,a,n,r,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.location.state.parentId,n=t.match.params.id,e.prev=3,this.testRef=he.a.database().ref("tests/".concat(a,"/quizes/").concat(n)),e.next=7,this.testRef.once("value");case 7:if(r=e.sent,s=r.val(),console.log(s),s.isPassed){e.next=13;break}return e.next=13,this.testRef.update({isPassed:!1});case 13:this.setState({quiz:s.quiz,isLoading:!1}),this.start(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.log(e.t0);case 20:case"end":return e.stop()}},e,this,[[3,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.testRef.off(),this.stop()}},{key:"onAnswerClickHandler",value:function(e){var t=this,a=this.state,n=a.results,r=a.quiz[a.activeQuestion];if(a.answerState){var s=Object.keys(a.answerState)[0];if("success"===a.answerState[s])return}if(r.rightAnswerId===e){n[r.id]||(n[r.id]="success"),this.setState({answerState:Object(Ke.a)({},e,"success"),results:n});var i=window.setTimeout(Object(f.a)(m.a.mark(function e(){var n,r,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isQuizFinished()){e.next=16;break}return n=t.props,r=n.location.state.parentId,s=n.match.params.id,e.prev=4,t.testRef=he.a.database().ref("tests/".concat(r,"/quizes/").concat(s)),e.next=8,t.testRef.update({isFinished:!0,isPassed:t.areAllAnswersRight(),time:ht(a.time)});case 8:t.setState({isFinished:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:e.next=17;break;case 16:t.setState(function(e){return{activeQuestion:e.activeQuestion+1,answerState:null}});case 17:window.clearTimeout(i);case 18:case"end":return e.stop()}},e,this,[[4,11]])})),1e3)}else n[r.id]="error",this.setState({answerState:Object(Ke.a)({},e,"error"),results:n})}},{key:"onRetryHandler",value:function(){this.setState({results:{},isFinished:!1,activeQuestion:0,answerState:null})}},{key:"start",value:function(){var e=this;this.timerId=setInterval(function(){return e.tick()},1e3)}},{key:"stop",value:function(){clearTimeout(this.timerId)}},{key:"tick",value:function(){this.setState(function(e){return{time:e.time+1}})}},{key:"isQuizFinished",value:function(){var e=this.state;return e.activeQuestion+1===e.quiz.length}},{key:"areAllAnswersRight",value:function(){var e=this.state;return Object.keys(e.results).map(function(t){return e.results[t]}).every(function(e){return"success"===e})}},{key:"render",value:function(){var e=this,t=this.state,a=this.props;return r.a.createElement("div",{className:Ye.a.Quiz},t.isLoading||!t.quiz?r.a.createElement(fe,null):r.a.createElement("div",{className:Ye.a.QuizWrapper},t.isFinished?null:r.a.createElement(vt,{time:ht(t.time)}),r.a.createElement("h1",null,"\u041e\u0442\u0432\u0435\u0442\u044c\u0442\u0435 \u043d\u0430 \u0432\u0441\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b"),t.isFinished?r.a.createElement(mt,{results:t.results,quiz:t.quiz,time:t.time,onRetry:e.onRetryHandler,location:a.location}):r.a.createElement(lt,{question:t.quiz[t.activeQuestion].question,answers:t.quiz[t.activeQuestion].answers,onAnswerClick:e.onAnswerClickHandler,answerNumber:t.activeQuestion+1,quizLength:t.quiz.length,state:t.answerState})))}}]),t}(n.Component),Et=[{to:"/catalog/tests/",label:"\u0422\u0435\u0441\u0442\u044b",exact:!1}],bt=Ze(Ve),Tt=Object(D.a)(function(e){var t=e.location;return r.a.createElement("div",{className:X.a.CatalogContentWrapper},r.a.createElement("div",{className:X.a.CatalogContent},r.a.createElement(z.a,{location:t},t.state?r.a.createElement(q.a,{path:"/catalog/tests/:id/:id",component:_t}):r.a.createElement(B.a,{from:"/catalog/tests/:id/:id",exact:!0,to:"/catalog/tests/"}),r.a.createElement(q.a,{path:"/catalog/tests/:id/",component:bt}),r.a.createElement(q.a,{path:"/catalog/tests/",component:je}))))}),gt=function(){return r.a.createElement("div",{className:X.a.Catalog},r.a.createElement($,{links:Et}),r.a.createElement(Tt,null))},Nt=a(42),It=a.n(Nt),Ot=a(29),Ct=a.n(Ot),wt=a(26),yt=a.n(wt),kt=(a(164),a(166),a(77)),jt=a.n(kt),St=a(8),At=a.n(St),Rt={image:"",name:"",title:"",description:""},Pt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(_.a)(t).call(this,e))).state={isSaving:!1,data:{},imageFile:null},a.nameRef=r.a.createRef(),a.onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a.onSubmit=a.onSubmit.bind(Object(b.a)(Object(b.a)(a))),a.onReset=a.onReset.bind(Object(b.a)(Object(b.a)(a))),a.handleFiles=a.handleFiles.bind(Object(b.a)(Object(b.a)(a))),a.removeImage=a.removeImage.bind(Object(b.a)(Object(b.a)(a))),a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.nameRef.current.focus()},400);var t=this.props;if(t.data){var a=Object(pe.a)({},t.data);this.setState({data:a})}}},{key:"onChange",value:function(e){var t=e.target;this.setState(function(e){return{data:Object(pe.a)({},e.data,Object(Ke.a)({},t.name,t.value))}})}},{key:"onSubmit",value:function(){var e=Object(f.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state,n=this.props,this.setState({isSaving:!0}),e.next=5,n.onAddTest(a.data,a.imageFile);case 5:this.reset(),this.setState({isSaving:!1});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onReset",value:function(){this.reset()}},{key:"removeImage",value:function(){this.setState(function(e){return{data:Object(pe.a)({},e.data,{image:""}),imageFile:null}})}},{key:"reset",value:function(){this.setState({data:Rt,imageFile:null})}},{key:"handleFiles",value:function(e){this.setState(function(t){return{data:Object(pe.a)({},t.data,{image:e.base64}),imageFile:e.fileList[0]}})}},{key:"render",value:function(){var e=this.state,t=e.data,a=t.image||"img/default.png",n=t.image||"Default image";return r.a.createElement("form",{className:At.a.AddNewItemForm,onSubmit:this.onSubmit,autoComplete:"off"},e.isSaving&&r.a.createElement("div",{className:At.a.AddNewItemPicSpinner}),r.a.createElement("div",{className:At.a.AddNewItemPic},r.a.createElement("div",{className:At.a.AddNewItemImgWrapper},r.a.createElement("img",{src:a,alt:n})),r.a.createElement("div",{className:At.a.AddNewItemPicBtns},r.a.createElement(jt.a,{handleFiles:this.handleFiles,base64:!0,multipleFiles:!1},r.a.createElement("button",{className:At.a.AddNewItemBtnAddPic,type:"button"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c")),t.image&&"img/default.png"!==t.image.base64&&r.a.createElement("button",{className:At.a.AddNewItemBtnDeletePic,type:"button",onClick:this.removeImage},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))),r.a.createElement("label",{className:At.a.AddNewItemLabel,htmlFor:"name"},r.a.createElement("input",{ref:this.nameRef,className:At.a.AddNewItemInput,type:"text",id:"name",name:"name",value:t.name||"",onChange:this.onChange,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",spellCheck:"false",required:!0}),r.a.createElement("span",{className:At.a.AddNewItemInputBorder})),r.a.createElement("label",{className:At.a.AddNewItemLabel,htmlFor:"title"},r.a.createElement("input",{className:At.a.AddNewItemInput,type:"text",id:"title",name:"title",value:t.title||"",onChange:this.onChange,placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",spellCheck:"false",required:!0}),r.a.createElement("span",{className:At.a.AddNewItemInputBorder})),r.a.createElement("label",{className:At.a.AddNewItemLabel,htmlFor:"description"},r.a.createElement("input",{className:At.a.AddNewItemInput,type:"text",id:"description",name:"description",value:t.description||"",onChange:this.onChange,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",spellCheck:"false",required:!0}),r.a.createElement("span",{className:At.a.AddNewItemInputBorder})),r.a.createElement("div",{className:At.a.AddNewItemActions},r.a.createElement("button",{className:At.a.AddNewItemActionBtn,type:"submit"},"Submit"),r.a.createElement("button",{className:At.a.AddNewItemActionBtn,type:"button",onClick:this.onReset},"Reset")))}}]),t}(n.Component),xt=function(e){var t=e.tests,a=e.location,n=e.editor,s=r.a.createElement("div",{className:yt.a.EmptyList},"\u0422\u0435\u0441\u0442\u044b \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u044b."),i=0!==Object.keys(n).length;return t.length||i?r.a.createElement(ee.TransitionGroup,{component:null},t.map(function(e){var t=e.info,s=e.quizes;return r.a.createElement(ee.CSSTransition,{key:t.id,timeout:500,classNames:"move"},r.a.createElement(ue,Object.assign({},t,{isEditable:i,quizes:s,onRemoveBtnClick:n.onRemove,onFavoriteBtnClick:n.onAddToFavorites,onEditBtnClick:n.onEdit,location:a})))})):s};xt.defaultProps={editor:{}};var Lt=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(_.a)(t).call(this,e))).state={modal:{isRendered:!1,visible:!1,data:null}},a.removeTest=a.removeTest.bind(Object(b.a)(Object(b.a)(a))),a.editTest=a.editTest.bind(Object(b.a)(Object(b.a)(a))),a.showModal=a.showModal.bind(Object(b.a)(Object(b.a)(a))),a.hideModal=a.hideModal.bind(Object(b.a)(Object(b.a)(a))),a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTests()}},{key:"showModal",value:function(e,t){var a=this.props.tests.filter(function(t){return t.id===e});this.setState({modal:{isRendered:!0,visible:!0,id:e,action:t,data:a.length?a[0].info:null}})}},{key:"hideModal",value:function(){this.setState(function(e){return{modal:{isRendered:e.modal.isRendered,visible:!1,id:null,action:e.modal.action,data:null}}})}},{key:"removeTest",value:function(){var e=this.state,t=this.props,a=e.modal.id;t.removeTest(a),this.hideModal()}},{key:"addTest",value:function(){var e=Object(f.a)(m.a.mark(function e(t,a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,e.next=3,n.addNewTest(t,a);case 3:this.hideModal();case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"editTest",value:function(){var e=Object(f.a)(m.a.mark(function e(t,a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,e.next=3,n.editTest(t,a);case 3:this.hideModal();case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=this.state.modal,n={onAddToFavorites:t.addTestToFavorites,onRemove:function(t){return e.showModal(t,"delete")},onEdit:function(t){return e.showModal(t,"edit")}};return r.a.createElement("div",{className:yt.a.Tests},t.isLoading?r.a.createElement(fe,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:yt.a.NewTestBtn,onClick:function(){return e.showModal(null,"add")},type:"button"}),xt(Object(pe.a)({},t,{editor:n}))),r.a.createElement(Ct.a,{visible:a.visible&&"delete"===a.action,width:300,height:65,closeOnEsc:!0,onClose:this.hideModal},r.a.createElement("div",{className:yt.a.DeleteModal},r.a.createElement("button",{className:yt.a.DeleteModalBtn,onClick:this.removeTest,type:"button"},"Delete"),r.a.createElement("button",{className:yt.a.DeleteModalBtn,onClick:this.hideModal,type:"button"},"Cancel"))),a.isRendered&&"add"===a.action&&r.a.createElement(Ct.a,{visible:a.visible,width:300,height:350,closeOnEsc:!0,onClose:this.hideModal,onAnimationEnd:function(){return!a.visible&&e.setState({modal:{isRendered:!1}})}},r.a.createElement(Pt,{onAddTest:function(t,a){return e.addTest(t,a)}})),a.isRendered&&"edit"===a.action&&r.a.createElement(Ct.a,{visible:a.visible,width:300,height:350,closeOnEsc:!0,onClose:this.hideModal,onAnimationEnd:function(){return!a.visible&&e.setState({modal:{isRendered:!1}})}},r.a.createElement(Pt,{data:a.data,onAddTest:function(t,a){return e.editTest(t,a)}})))}}]),t}(n.Component),Mt=Object(l.b)(function(e){return{tests:e.catalog.tests,isLoading:e.catalog.isLoading}},function(e){return{fetchTests:function(){return e(Ie())},addTestToFavorites:function(t){return e(function(e){return function(){var t=Object(f.a)(m.a.mark(function t(a,n){var r,s,i,o,c;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().catalog.tests,s=r.filter(function(t){return t.id===e})[0],t.prev=2,t.next=5,ge.put("/tests/".concat(e,".json"),Object(pe.a)({},s,{info:Object(pe.a)({},s.info,{isFavorite:!s.info.isFavorite})}));case 5:i=t.sent,o=i.data,c=r.map(function(e){return e.id===o.id?Object(pe.a)({},e,o):e}),a(Oe(c)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),a((t.t0,{type:"ADD_TEST_TO_FAVORITES_ERROR"}));case 14:case"end":return t.stop()}},t,this,[[2,11]])}));return function(e,a){return t.apply(this,arguments)}}()}(t))},addNewTest:function(t){return e((a=t,function(e){return new Promise(function(){var t=Object(f.a)(m.a.mark(function t(r){var s,i,o,c,l;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s={info:Object(pe.a)({},a,{isFavorite:!1})},t.prev=1,!n){t.next=11;break}return i=be.storage().ref("tests"),o=i.child(n.name).put(n),t.next=7,o;case 7:return c=t.sent,t.next=10,c.ref.getDownloadURL();case 10:s.info.image=t.sent;case 11:return t.next=13,ge.post("tests.json",s);case 13:l=t.sent,s.id=l.data.name,s.info.id=l.data.name,e(Ce(s)),r(),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),e({type:"ADD_NEW_TEST_ERROR",error:t.t0});case 23:case"end":return t.stop()}},t,this,[[1,20]])}));return function(e){return t.apply(this,arguments)}}())}));var a,n},removeTest:function(t){return e(function(e){return function(){var t=Object(f.a)(m.a.mark(function t(a){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ge.delete("/tests/".concat(e,".json"));case 3:a(we(e)),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),a({type:"REMOVE_TEST_ERROR",error:t.t0});case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(e){return t.apply(this,arguments)}}()}(t))},editTest:function(t){return e((a=t,function(){var e=Object(f.a)(m.a.mark(function e(t,r){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(f.a)(m.a.mark(function e(s){var i,o,c,l,u,d;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r().catalog.tests,(o=i.filter(function(e){return e.info.id===a.id})[0]).info=Object(pe.a)({},a),e.prev=3,!n){e.next=13;break}return c=be.storage().ref("tests"),l=c.child(n.name).put(n),e.next=9,l;case 9:return u=e.sent,e.next=12,u.ref.getDownloadURL();case 12:o.info.image=e.sent;case 13:return e.next=15,ge.put("tests/".concat(a.id,".json"),o);case 15:d=i.map(function(e){return e.id===a.id?Object(pe.a)({},e,a):e}),t(ye(d)),s(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),t({type:"EDIT_TEST_ERROR",error:e.t0});case 23:case"end":return e.stop()}},e,this,[[3,20]])}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()));var a,n}}})(Lt),Ft=a(78),zt=a.n(Ft),qt=a(55),Bt=a.n(qt),Dt=function(e){var t=e.children,a=e.onClick,n=e.disabled,s=e.type,i=[Bt.a.Button,Bt.a[s]];return r.a.createElement("button",{className:i.join(" "),onClick:a,disabled:n,type:"button"},t)};Dt.defaultProps={onClick:function(){},disabled:!1};var Qt=Dt,Wt=a(56),Ut=a.n(Wt),Ht=function(e){var t=e.valid,a=e.touched,n=e.shouldValidate;return!t&&n&&a},Vt=function(e){var t=e.type,a=e.label,n=e.spellCheck,s=e.value,i=e.onChange,o=e.errorMessage,c=e.valid,l=e.touched,u=e.shouldValidate,d=[Ut.a.Input],m="".concat(t,"-").concat(Math.random());return Ht({valid:c,touched:l,shouldValidate:u})&&d.push(Ut.a.invalid),r.a.createElement("div",{className:d.join(" ")},r.a.createElement("label",{htmlFor:m},a),r.a.createElement("input",{type:t,id:m,spellCheck:n,value:s,onChange:i}),Ht({valid:c,touched:l,shouldValidate:u})?r.a.createElement("span",null,o):null)};Vt.defaultProps={type:"text",label:"",spellCheck:!1,value:"",onChange:function(){},errorMessage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0435\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",valid:!0,touched:!1,shouldValidate:!1};var Jt=Vt,Zt=a(79),Kt=a.n(Zt),Xt=function(e){var t=e.label,a=e.value,n=e.onChange,s=e.options,i="".concat(t,"-").concat(Math.random());return r.a.createElement("div",{className:Kt.a.Select},r.a.createElement("label",{htmlFor:i},t),r.a.createElement("select",{id:i,value:a,onChange:n},s.map(function(e,t){var a=e.value+t;return r.a.createElement("option",{key:a,value:e.value},e.text)})))};Xt.defaultProps={label:"",value:1,onChange:function(){},options:[]};var Yt=Xt,Gt=a(80),$t=a.n(Gt),ea=function(e,t){return Object(pe.a)({},e,{validation:t,valid:!t,touched:!1,shouldValidate:!!t,value:""})},ta=function(e){return Object.keys(e).reduce(function(t,a){return e[a].valid&&t},!0)},aa=function(e){return ea({label:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 ".concat(e),errorMessage:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",id:e},{required:!0})},na=function(){return{question:ea({label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u043e\u043f\u0440\u043e\u0441",errorMessage:"\u0412\u043e\u043f\u0440\u043e\u0441 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"},{required:!0}),option1:aa(1),option2:aa(2),option3:aa(3),option4:aa(4)}},ra=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(_.a)(t).call(this,e))).state={isFormValid:!1,rightAnswerId:1,formControls:na()},a.selectChangeHandler=a.selectChangeHandler.bind(Object(b.a)(Object(b.a)(a))),a.addQuestionHandler=a.addQuestionHandler.bind(Object(b.a)(Object(b.a)(a))),a.createQuizHandler=a.createQuizHandler.bind(Object(b.a)(Object(b.a)(a))),a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"addQuestionHandler",value:function(e){e.preventDefault();var t=this.state,a=this.props,n=t.formControls,r=n.question,s=n.option1,i=n.option2,o=n.option3,c=n.option4,l={question:r.value,id:a.quiz.length+1,rightAnswerId:t.rightAnswerId,answers:[{text:s.value,id:s.id},{text:i.value,id:i.id},{text:o.value,id:o.id},{text:c.value,id:c.id}]};a.createQuizQuestion(l),this.setState({isFormValid:!1,rightAnswerId:1,formControls:na()})}},{key:"createQuizHandler",value:function(e){e.preventDefault();var t=this.props;this.setState({isFormValid:!1,rightAnswerId:1,formControls:na()}),t.finishCreateQuiz(),t.onAdd(t.quiz)}},{key:"changeHandler",value:function(e,t){var a=this.state,n=Object(pe.a)({},a.formControls),r=Object(pe.a)({},n[t]);r.value=e,r.touched=!0,r.valid=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!0;return t?(t.required&&(a=""!==e.trim()&&a),t.email&&(a=$t.a.email(e)&&a),t.minLength&&(a=e.length>=t.minLength&&a),a):a}(r.value,r.validation),n[t]=r,this.setState({isFormValid:ta(n),formControls:n})}},{key:"selectChangeHandler",value:function(e){this.setState({rightAnswerId:+e.target.value})}},{key:"renderControls",value:function(){var e=this,t=this.state;return Object.keys(t.formControls).map(function(a,n){var s=t.formControls[a],i=a+n;return r.a.createElement(r.a.Fragment,{key:i},r.a.createElement(Jt,Object.assign({},s,{onChange:function(t){var n=t.target;return e.changeHandler(n.value,a)}})),0===n?r.a.createElement("hr",null):null)})}},{key:"render",value:function(){var e=this.state,t=this.props,a=r.a.createElement(Yt,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442",value:e.rightAnswerId,onChange:this.selectChangeHandler,options:[{text:1,value:1},{text:2,value:2},{text:3,value:3},{text:4,value:4}]});return r.a.createElement("div",{className:zt.a.QuizCreator},r.a.createElement("div",null,r.a.createElement("h1",null,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u0435\u0441\u0442\u0430"),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},this.renderControls(),a,r.a.createElement(Qt,{type:"primary",onClick:this.addQuestionHandler,disabled:!e.isFormValid},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441"),r.a.createElement(Qt,{type:"success",onClick:this.createQuizHandler,disabled:0===t.quiz.length},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u0441\u0442"))))}}]),t}(n.Component),sa=Object(l.b)(function(e){return{quiz:e.create.quiz}},function(e){return{createQuizQuestion:function(t){return e(function(e){return{type:"CREATE_QUIZ_QUESTION",item:e}}(t))},finishCreateQuiz:function(){return e(function(){var e=Object(f.a)(m.a.mark(function e(t,a){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().create,e.next=3,ge.post("/quizes.json",n.quiz);case 3:t({type:"RESET_QUIZ_CREATION"});case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}())}}})(ra),ia=[{to:"/constructor/tests/",label:"\u0422\u0435\u0441\u0442\u044b",exact:!1}],oa=function(e){return function(t){function a(e){var t;return Object(p.a)(this,a),(t=Object(h.a)(this,Object(_.a)(a).call(this,e))).state={test:{},isLoading:!0,modal:{isRendered:!1,visible:!1,data:null}},t.showModal=t.showModal.bind(Object(b.a)(Object(b.a)(t))),t.hideModal=t.hideModal.bind(Object(b.a)(Object(b.a)(t))),t}return Object(E.a)(a,t),Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.itemRef=he.a.database().ref("tests/".concat(t)),this.itemRef.on("value",function(t){var a=t.val();e.setState({test:a,isLoading:!1})})}},{key:"componentWillUnmount",value:function(){this.itemRef.off()}},{key:"onAdd",value:function(){var e=Object(f.a)(m.a.mark(function e(t){var a,n,r,s,i,o,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.match.params.id,this.itemsRef=he.a.database().ref("tests/".concat(r,"/quizes")),s={type:"numeric",name:"\u0422\u0435\u0441\u0442 1",questionCount:t.length,isFinished:null,quiz:t},e.next=6,this.itemsRef.push(s);case 6:i=e.sent,o=i.key,a={},Object(Ke.a)(a,"tests/".concat(r,"/quizes/").concat(o),s),Object(Ke.a)(a,"quizes/".concat(o),s),c=a,he.a.database().ref().update(c),this.hideModal();case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onRemove",value:function(e){var t=this.props.match.params.id;he.a.database().ref("tests/".concat(t,"/quizes/").concat(e)).remove(),he.a.database().ref("quizes/".concat(e)).remove()}},{key:"showModal",value:function(e,t){this.setState({modal:{isRendered:!0,visible:!0,id:e,action:t}})}},{key:"hideModal",value:function(){this.setState(function(e){return{modal:{isRendered:e.modal.isRendered,visible:!1,id:null,action:e.modal.action}}})}},{key:"render",value:function(){var t=this,a=this.state,n=this.props,s=a.modal,i={isEditable:!0,onRemove:function(e){return t.onRemove(e)},onAdd:function(e){return t.showModal(e,"add")}},o=n.match.params.id;return r.a.createElement("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap"}},a.isLoading?r.a.createElement(fe,null):r.a.createElement(e,{data:a.test,location:n.location,editor:i,id:o}),s.isRendered&&"add"===s.action&&r.a.createElement(Ct.a,{visible:s.visible,width:800,height:650,closeOnEsc:!0,onClose:this.hideModal,onAnimationEnd:function(){return!s.visible&&t.setState({modal:{isRendered:!1}})}},r.a.createElement(sa,{onAdd:function(e){return t.onAdd(e)}})))}}]),a}(n.Component)}(Ve),ca=Object(D.a)(function(e){var t=e.location;return r.a.createElement("div",{className:It.a.ConstructorContentWrapper},r.a.createElement("div",{className:It.a.ConstructorContent},r.a.createElement(z.a,{location:t},t.state?r.a.createElement(q.a,{path:"/constructor/tests/:id/:id",component:_t}):r.a.createElement(B.a,{from:"/constructor/tests/:id/:id",exact:!0,to:"/constructor/tests/"}),r.a.createElement(q.a,{path:"/constructor/tests/:id/",component:oa}),r.a.createElement(q.a,{path:"/constructor/tests/",component:Mt}))))}),la=function(){return r.a.createElement("div",{className:It.a.Constructor},r.a.createElement($,{links:ia}),r.a.createElement(ca,null))},ua=function(e){var t=e.user;return r.a.createElement(H,null,t?r.a.createElement(z.a,null,r.a.createElement(q.a,{path:"/",exact:!0,component:Z}),r.a.createElement(B.a,{from:"/catalog",exact:!0,to:"/catalog/tests/"}),r.a.createElement(q.a,{path:"/catalog/",component:gt}),r.a.createElement(B.a,{from:"/constructor",exact:!0,to:"/constructor/tests/"}),r.a.createElement(q.a,{path:"/constructor",component:la})):null)};ua.defaultProps={user:null};var da=Object(D.a)(ua),ma=a(34),fa=a.n(ma),pa=function(){return r.a.createElement("footer",{className:fa.a.Footer},r.a.createElement("div",{className:fa.a.FooterWrapper},r.a.createElement(T.a,{className:fa.a.FooterLogo,to:"/"},"\u0418\u043d\u0441\u0430\u0439\u0434\u0438\u044f, 2018"),r.a.createElement("div",null,"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u043c:",r.a.createElement("a",{className:fa.a.FooterContactEmail,href:"mailto:info@insideland.ru"},"info@insideland.ru"))))},va=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(_.a)(t).call(this,e))).state={user:null},a.login=a.login.bind(Object(b.a)(Object(b.a)(a))),a.logout=a.logout.bind(Object(b.a)(Object(b.a)(a))),a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;Ee.onAuthStateChanged(function(t){t&&e.setState({user:t})})}},{key:"login",value:function(){var e=Object(f.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.signInWithPopup(_e);case 2:t=e.sent,a=t.user,this.setState({user:a});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(f.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.signOut();case 2:this.setState({user:null});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state;return r.a.createElement("div",{className:"app"},r.a.createElement(F,{user:e.user,onLogIn:this.login,onLogOut:this.logout}),r.a.createElement(da,{user:e.user}),r.a.createElement(pa,null))}}]),t}(n.Component),ha=a(39),_a={tests:[],isLoading:!1},Ea={quiz:[]},ba=Object(o.c)({catalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TESTS_START":return Object(pe.a)({},e,{isLoading:!0});case"FETCH_TESTS_SUCCESS":return Object(pe.a)({},e,{tests:t.tests,isLoading:!1});case"FETCH_TESTS_ERROR":return Object(pe.a)({},e,{error:t.error,isLoading:!1});case"ADD_TEST_TO_FAVORITES_SUCCESS":return Object(pe.a)({},e,{tests:t.tests});case"ADD_TEST_TO_FAVORITES_ERROR":return Object(pe.a)({},e,{error:t.error});case"ADD_NEW_TEST_SUCCESS":return Object(pe.a)({},e,{tests:[t.test].concat(Object(ha.a)(e.tests))});case"ADD_NEW_TEST_ERROR":return Object(pe.a)({},e,{error:t.error});case"REMOVE_TEST_SUCCESS":return Object(pe.a)({},e,{tests:e.tests.filter(function(e){return e.id!==t.id})});case"REMOVE_TEST_ERROR":return Object(pe.a)({},e,{error:t.error});case"EDIT_TEST_SUCCESS":return Object(pe.a)({},e,{tests:t.tests});case"EDIT_TEST_ERROR":return Object(pe.a)({},e,{error:t.error});default:return e}},create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_QUIZ_QUESTION":return Object(pe.a)({},e,{quiz:Object(ha.a)(e.quiz).concat([t.item])});case"RESET_QUIZ_CREATION":return Object(pe.a)({},e,{quiz:[]});default:return e}}}),Ta="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):o.d,ga=Object(o.e)(ba,Ta(Object(o.a)(c.a))),Na=r.a.createElement(l.a,{store:ga},r.a.createElement(u.a,null,r.a.createElement(va,null)));i.a.render(Na,document.querySelector(".root"))},18:function(e,t,a){e.exports={Test:"TestStats_Test__1EJoF",TestWrapper:"TestStats_TestWrapper__2jUvt",TestTopIcons:"TestStats_TestTopIcons__2Ybxg","fa-heart":"TestStats_fa-heart__2p4CV",TestProfile:"TestStats_TestProfile__AoSdh",TestProfileCheck:"TestStats_TestProfileCheck__2FaiZ",TestThumbail:"TestStats_TestThumbail__1bR5j",TestProfileName:"TestStats_TestProfileName__1H2dM",TestProfileTitle:"TestStats_TestProfileTitle__2yF6N",TestProfileDescription:"TestStats_TestProfileDescription__2C6LK",TestProfileBtn:"TestStats_TestProfileBtn__11Z_9",TestSocialIcon:"TestStats_TestSocialIcon__jv5ov",TestPassedInfo:"TestStats_TestPassedInfo__22wo-",TestPassedInfoAmount:"TestStats_TestPassedInfoAmount__h1DCm",TestPassedRange:"TestStats_TestPassedRange___Hbbi",TestPassedRangeCircleOne:"TestStats_TestPassedRangeCircleOne__3ZJX9",TestPassedRangeCircleTwo:"TestStats_TestPassedRangeCircleTwo__1brBc"}},26:function(e,t,a){e.exports={Tests:"TestList_Tests__37XN9",NewTestBtn:"TestList_NewTestBtn__bg_c8",DeleteModal:"TestList_DeleteModal__1i7CS",DeleteModalBtn:"TestList_DeleteModalBtn__2ulT8",EmptyList:"TestList_EmptyList__2a12I"}},30:function(e,t,a){e.exports={MainNav:"MainNav_MainNav__17B6i",MainNavItem:"MainNav_MainNavItem__3AYPn",MainNavItemLink:"MainNav_MainNavItemLink__239Pb",MainNavItemLinkActive:"MainNav_MainNavItemLinkActive__22WQW"}},31:function(e,t,a){e.exports={UserNav:"UserNav_UserNav__Lw8yO",UserNavPicWrapper:"UserNav_UserNavPicWrapper__2zwzj",UserNavPic:"UserNav_UserNavPic__23QfW",UserNavBtn:"UserNav_UserNavBtn__3AWQi"}},32:function(e,t,a){e.exports={Navigation:"InnerNavigation_Navigation__2wBz7",NavigationItem:"InnerNavigation_NavigationItem__3mfxl",NavigationItemLink:"InnerNavigation_NavigationItemLink__3iUwK",NavigationItemLinkActive:"InnerNavigation_NavigationItemLinkActive__2xBIZ"}},33:function(e,t,a){e.exports={TestsTable:"TestTable_TestsTable__3hg7z",NewItemBtnWrapper:"TestTable_NewItemBtnWrapper__1V7zb",NewItemBtn:"TestTable_NewItemBtn__2f-3G"}},34:function(e,t,a){e.exports={Footer:"Footer_Footer__vz9EF",FooterWrapper:"Footer_FooterWrapper__15hgN",FooterLogo:"Footer_FooterLogo__3QWsQ",FooterContactEmail:"Footer_FooterContactEmail__24XOl"}},40:function(e,t,a){e.exports={Header:"Header_Header__3IpM-",HeaderInner:"Header_HeaderInner__1EnJC",HeaderLogo:"Header_HeaderLogo__3izMD"}},41:function(e,t,a){e.exports={Catalog:"Catalog_Catalog__2q43R",CatalogContentWrapper:"Catalog_CatalogContentWrapper__3qa3B",CatalogContent:"Catalog_CatalogContent__1R2oz"}},42:function(e,t,a){e.exports={Constructor:"Constructor_Constructor__pNDhW",ConstructorContentWrapper:"Constructor_ConstructorContentWrapper__257Me",ConstructorContent:"Constructor_ConstructorContent__WIbDv"}},47:function(e,t,a){e.exports={Navigation:"Navigation_Navigation__2lPyd",NavigationWrapper:"Navigation_NavigationWrapper__1_JhE"}},48:function(e,t,a){e.exports={Layout:"Layout_Layout__1Kq0I",LayoutMain:"Layout_LayoutMain__2eoLW"}},49:function(e,t,a){e.exports={Tests:"TestList_Tests__3Iq0-",NewTestBtn:"TestList_NewTestBtn__3zO1c",DeleteModal:"TestList_DeleteModal__1kq5Q",DeleteModalBtn:"TestList_DeleteModalBtn__22lUS",EmptyList:"TestList_EmptyList__2KPyp"}},50:function(e,t,a){e.exports={Loader:"Loader_Loader__1tlKE",center:"Loader_center__3vStx"}},51:function(e,t,a){e.exports={Quiz:"Quiz_Quiz__1nOFv",QuizWrapper:"Quiz_QuizWrapper__1xsPw"}},52:function(e,t,a){e.exports={ActiveQuiz:"ActiveQuiz_ActiveQuiz__1zZyr",Question:"ActiveQuiz_Question__3qquW"}},53:function(e,t,a){e.exports={AnswerItem:"AnswerItem_AnswerItem__2Cj1e",success:"AnswerItem_success__Fo1OW",error:"AnswerItem_error__3EMlP"}},54:function(e,t,a){e.exports={FinishedQuiz:"FinishedQuiz_FinishedQuiz__3Pf_F",success:"FinishedQuiz_success__3-3BU",error:"FinishedQuiz_error__1J64b"}},55:function(e,t,a){e.exports={Button:"Button_Button__3SEzo",error:"Button_error__3uBYb"}},56:function(e,t,a){e.exports={Input:"Input_Input__ZmxJ7",invalid:"Input_invalid__2qY0W"}},71:function(e,t,a){e.exports={Main:"Main_Main__2KHio"}},73:function(e,t,a){e.exports={TestInfo:"TestInfo_TestInfo__2Kl9X"}},74:function(e,t,a){e.exports={AnswersList:"AnswersList_AnswersList__1AFu7"}},76:function(e,t,a){e.exports={Timer:"Timer_Timer__1F-6d"}},78:function(e,t,a){e.exports={QuizCreator:"QuizCreator_QuizCreator__13LUM"}},79:function(e,t,a){e.exports={Select:"Select_Select__1wI5s"}},8:function(e,t,a){e.exports={AddNewItemPic:"TestItemInfoModal_AddNewItemPic__2WQqS",AddNewItemImgWrapper:"TestItemInfoModal_AddNewItemImgWrapper__3eMxW",AddNewItemPicBtns:"TestItemInfoModal_AddNewItemPicBtns__2DRie",AddNewItemBtnAddPic:"TestItemInfoModal_AddNewItemBtnAddPic__1o2Bw",AddNewItemBtnDeletePic:"TestItemInfoModal_AddNewItemBtnDeletePic__25tIC",AddNewItemLabel:"TestItemInfoModal_AddNewItemLabel__1Caxi",AddNewItemInputFile:"TestItemInfoModal_AddNewItemInputFile__d5mL8",AddNewItemInput:"TestItemInfoModal_AddNewItemInput__1Sk_N",AddNewItemInputBorder:"TestItemInfoModal_AddNewItemInputBorder__jArwe",AddNewItemInputBorderActive:"TestItemInfoModal_AddNewItemInputBorderActive__2ftEM",AddNewItemActions:"TestItemInfoModal_AddNewItemActions__vx--n",AddNewItemActionBtn:"TestItemInfoModal_AddNewItemActionBtn__Qdqoz",AddNewItemPicSpinner:"TestItemInfoModal_AddNewItemPicSpinner__fZ9pJ",load:"TestItemInfoModal_load__2OTgt",hue:"TestItemInfoModal_hue__3oCP2"}},81:function(e,t,a){e.exports=a(175)},92:function(e,t,a){}},[[81,2,1]]]);
//# sourceMappingURL=main.91347c96.chunk.js.map